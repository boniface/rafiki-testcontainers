'use strict';

const { FindOperation } = require('objection/lib/queryBuilder/operations/FindOperation');
const { assertHasId } = require('objection/lib/utils/assert');

class InstanceFindOperation extends FindOperation {
  constructor(name, opt) {
    super(name, opt);
    this.instance = opt.instance;
  }

  onBuild(builder) {
    assertHasId(this.instance);
    builder.findById(this.instance.$id());
  }
}

module.exports = {
  InstanceFindOperation,
};
