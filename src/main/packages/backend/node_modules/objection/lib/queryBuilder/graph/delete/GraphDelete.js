'use strict';

const { GraphOperation } = require('objection/lib/queryBuilder/graph/GraphOperation');
const { GraphDeleteAction } = require('objection/lib/queryBuilder/graph/delete/GraphDeleteAction');

class GraphDelete extends GraphOperation {
  createActions() {
    return [
      new GraphDeleteAction(this.graphData, {
        nodes: this.currentGraph.nodes.filter((currentNode) =>
          this.graphOptions.shouldDeleteOrUnrelate(currentNode, this.graphData),
        ),
      }),
    ];
  }
}

module.exports = {
  GraphDelete,
};
